<div class="">
  <p-toast />
  <h3>Materia > tema > subtema </h3>
  <!-- <p-breadcrumb class="max-w-full" [model]="items">

  </p-breadcrumb> -->
  <div class="flex justify-content-between flex-wrap gap-2 mb-2">
    <div class="w-full md:w-3 xl:w-2">
      <p-button label="Nuevo tema" [style]="{width: '100%'}" />
    </div>
    <div class="w-full md:w-4 xl:w-5">
      <p-iconField iconPosition="left" class="ml-auto">
        <p-inputIcon>
          <i class="pi pi-search"></i>
        </p-inputIcon>
        <input #inputSearch pInputText type="text" placeholder="Search keyword" [style]="{width: '100%'}"
          (input)="applyFilter($event)" />
      </p-iconField>
    </div>
  </div>

  <p-table #dt [value]="temas" selectionMode="single" (sortFunction)="customSort($event)"
    (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnselect($event)" [customSort]="true"
    [globalFilterFields]="['nombre']">
    <ng-template pTemplate="header">
      <tr class="text-lg">
        <th pSortableColumn="nombre">
          Nombre <p-sortIcon field="nombre" />
        </th>
        <th></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-tema>
      <tr [pSelectableRow]="tema" class="text-lg">
        <td>
          <i class="pi pi-book vertical-align-middle"></i>
          <span class="ml-1 vertical-align-middle">
            {{ tema.nombre }}
          </span>
        </td>
        <td class="text-right">
          <p-button icon="pi pi-pencil" class="mr-2" [rounded]="true" [outlined]="true" severity="success"
            (onClick)="editTema(tema)" />

          <p-button icon="pi pi-trash" severity="danger" [rounded]="true" [outlined]="true"
            (onClick)="deleteTema(tema)" />
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5">No se encontrar√≥n temas con ese nombre.</td>
      </tr>
    </ng-template>
  </p-table>

  <p-dialog [(visible)]="temaDialog" header="Editar Tema" [modal]="true" [style]="{ width: '300px' }">
    <label for="nombre" class="font-semibold block mb-2">Nombre</label>
    <input pInputText [(ngModel)]="tema.nombre" id="nombre" class="block w-full" />
    <span *ngIf="!tema.nombre" class="p-error font-italic block mt-2">
      El nombre es requerido.
    </span>
    <ng-template pTemplate="footer">
      <p-button label="Cancel" [text]="true" severity="secondary" (onClick)="hideDialog()" />
      <p-button label="Save" [outlined]="true" severity="success" (onClick)="saveTema()" />
    </ng-template>
  </p-dialog>

  <p-confirmDialog [style]="{ width: '300px' }" />
</div>
